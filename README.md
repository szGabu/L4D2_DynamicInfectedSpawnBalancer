# [L4D2] Dynamic Infected Spawn Balancer 
*Author: gabuch2*

*Version: 1.0.0*

*Plugin for Left 4 Dead 2 that dynamically balances infected spawns and tanks based on the number of survivors.*
  
Originally based on xZk's plugin, it eventually became a whole rewrite. The original plugin had several problems:
-   It used integer calculations for CommonLimit, which was actually a float value in-game. This meant the calculations had no practical effect due to passing an invalid value. The new implementation parses CommonLimit as float to correctly adjust the value
-   The original plugin used a constant base when balancing, completely disregarding the Director. Which means in maps where Special Infected were limited they would spawn like always. The new implementation balances around the Director's intended value
-   It didn't affect tanks at all (Just increasing the limit has no effect)
## Key Features 
-   Proportionally adjusts infected spawns based on survivor count
-   Balances around the map director's intended special infected count
-   Spawns more tanks depending on how many survivors are in the match while also balancing their HP from a pool
-   Scales difficulty smoothly with player count based on the configurable counting modes:
    -   Ignore bot survivors
    -   Ignore dead survivors
    -   Count dead survivors as half
    -   Ignore custom campaign NPCs
        -   NPCs like the ones in the Cold Front custom campaign
## Dependencies
-   [Left 4 DHooks Direct](https://forums.alliedmods.net/showthread.php?t=321696) (1.135 or newer)
## Supported Games
-   Left 4 Dead 2
## ConVars
-   **sm_infected_balancer_enabled**
    -   Determines if the plugin is enabled or not
        -   Default: 1
-   **sm_infected_balancer_check_mode**
    -   Bitwise value of how should the plugin check for surivors.
        -   Possible values are:
            -   0: Check all survivors
            -   1: Do not check bots
            -   2: Not check dead survivors
            -   4: Dead survivors count as half (No effect if 2 is set)
            -   8: Ignore campaign NPCs (like the ones in the Coldfront custom campaign, no effect is 1 is set)
        -   Default: 4
-   **sm_infected_balancer_cache_interval**
    -   Determines the interval in where the survivors are counted
    -   Caching is done to prevent an expensive operation in each director vscript variable call
    -   0.1 is the minimum value which is virtually instantaneous but may cause overhead
        -   Default: 5.0
-   **sm_infected_balancer_tank_balance**
    -   Determines if the plugin should balance tanks.
    -   0 to disable
        -   Default: 1
-   **sm_infected_balancer_tank_increase_hp_percent**
    -   Increases each tank's HP by specified percent (%) per alive survivor
    -   Maximum value is 50 but it's not recommended to put anything higher than 5, as it could create extremely damage sponge Tanks
    -   No effect if `sm_infected_balancer_tank_balance` is 0.
    -   0 to disable
        -   Default: 2
-   **sm_infected_balancer_si_general_power**
    -   Determines how much the limit of the general special infected amount will increase according with each survivor alive
    -   Default value is the recommended one but you can experiment
    -   0 to disable
        -   Default: 0.456
-   **sm_infected_balancer_si_dominator_power**
    -   Determines how much each category of dominator infected will increase according with each survivor alive
    -   Default value is the recommended one but you can experiment
    -   0 to disable
        -   Default: 0.333
-   **sm_infected_balancer_commons_power**
    -   Determines how much the limit of each common infected will increase according with each survivor alive
    -   Default value is the recommended one but you can experiment
    -   0 to disable
        -   Default: 0.222
-   **sm_infected_balancer_spawn_interval_power**
    -   Determines how much the spawn interval of special infected will decrease according with each survivor alive
    -   The minimum possible interval is 20 (Which is the Versus interval) no matter how much you increase this setting
    -   Default value is the recommended one but you can experiment
    -   0 to disable
        -   Default: 0.018
-   **sm_infected_balancer_versus_like**
    -   Increases special infected by one AFTER CALCULATIONS
    -   For example, most of the time in campaigns you will be dealing with 3 SI at the same time, this would effectively increase it to 4
    -   No effect on Versus
        -   Default: 1
## Download and Source Code
-   You can download an up to date .smx binary from **[![](https://forums.alliedmods.net/image-proxy/59dfef4187a448378ae1cfd2097a4a346af1a371/68747470733a2f2f692e696d6775722e636f6d2f366b43375a66382e706e67) GitHub Releases](https://github.com/szGabu/L4D2_DynamicInfectedSpawnBalancer/releases)**. These binaries are generated by GitHub and the workflow can be checked out in **[![](https://forums.alliedmods.net/image-proxy/59dfef4187a448378ae1cfd2097a4a346af1a371/68747470733a2f2f692e696d6775722e636f6d2f366b43375a66382e706e67) GitHub Actions](https://github.com/szGabu/L4D2_DynamicInfectedSpawnBalancer/blob/main/.github/workflows/manual.yml)**.
-   If you wish to compile it yourself:
    -   Download all requirements, plus the .sp file.
    -   Place include files in the /scripting/includes directory.
    -   Compile the plugin.
-   Copy the .smx file into the plugins folder in your Sourcemod installation.
